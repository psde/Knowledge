@echo off
@setlocal enableextensions enabledelayedexpansion
rem 
rem Copies @ENV_EXPORT_COPY_DLLS_NAME@ dlls to bin/ directory
rem 
rem Note: This file is autogenerated. Every change will be lost 
rem       with next CMake run.

set SRC_DIR="@ENV_EXPORT_COPY_DLLS_SRC_PATH@"
set BIN_DIR="@ENV_EXPORT_BIN_PATH@"
set LIB_DIR="@ENV_EXPORT_LIB_PATH@"

mkdir !BIN_DIR!\Debug 1>NUL
mkdir !BIN_DIR!\Release 1>NUL
mkdir !LIB_DIR!\Debug 1>NUL
mkdir !LIB_DIR!\Release 1>NUL

set DEBUG_PATTERN=@ENV_EXPORT_COPY_DLLS_PATTERN@
for /r %SRC_DIR% %%A in (*.dll) do (
    SET DLL_PATH=%%~fA
    SET DLL_NAME=%%~nA%%~xA

    Set patternReplaced=!DLL_NAME:%DEBUG_PATTERN%=?!
    If Not !patternReplaced! == !DLL_NAME! ( 
        rem debug version
        copy !DLL_PATH! !BIN_DIR!\Debug 1>NUL
        copy !DLL_PATH! !LIB_DIR!\Debug 1>NUL
    ) else (
        rem release version
        copy !DLL_PATH! !BIN_DIR!\Release 1>NUL
        copy !DLL_PATH! !LIB_DIR!\Release 1>NUL
    )
)

echo Done.